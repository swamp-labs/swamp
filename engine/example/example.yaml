x-headers: &headers
    headers:
    - Content-Type: "application/json"
    - Accept: "*/*"


simulation:
  g1: 
  - name: req1
    verb: "POST"
    protocol: https
    url: https://reqres.in/api/users
    <<: *headers
    body: '{ "name": "batman", "job": "superhero"}'
    assertions:
      headers:
      - Access-Control-Allow-Origin: ["*"]
      - Content-Type: [application/json; charset=utf-8]
      body:      
      - kind: jsonpath
        exp: $.id
        variable: id
      - kind: regex
        exp: '(\d{1,3})'
      code:
        - 201

  - name: req2
    verb: GET
    url: https://reqres.in/api/users/${id}
    <<: *headers
    assertions:
    - kind: jsonpath
      exp: $.id
      variable: id
  
  g2: 
  - name: req3
    verb: GET
    url: https://reqres.in/api/users
    assertions:
      code:
        - 200

volumes:
 - request_group: g1
#   execution: 
#   - wait: 5
#   - rps: 5
#     during: 60s
#   - increase: